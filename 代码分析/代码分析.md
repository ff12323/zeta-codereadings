



### 1、代码的正常与异常：

怎么样算正常？怎么样算异常？

运行中的代码表现的行为依据什么来判断？

1、依靠日志来判断：如果代码走到了一个异常的流程，则打印错误的内容。

但是这样的错误日志，只能显示出整体的异常。【错误日志根本原因（错误根因）：导致出现错误日志打印的根本原因】

- 1、有时会是环境的异常（被破坏导致流程无法走下去），而不是代码本身的问题；
- 2、有时，报错的日志存在，的确是代码本身存在BUG（无论是设计上，实现上，功能上 等等 问题）；
- 3、有时日志是应该是 INFO类型的，被设置为 ERR类型。

讨论：对于代码作者，代码新接手，2者在面对错误日志的处理方法、代码认知程度、能否有效地识别**错误根因**？

---

复杂化：对于复杂系统与简单系统的错误日志分析。

- 问题：
  - 1、是否能够确定 根因源？确定的代价是什么？
    - 什么情况下能够确定？什么情况下不能？确定的要素是什么？
  - 2、是否有必要确定？

相比于简单的系统，复杂系统的错误根因变得多样化，链化根因（多种组件，多种因素的出现，导致**直接根因**与**间接根因**的出现，我们见到的很多是间接根因，而不是直接根因，我们实际要追溯的是根因源（或者说是根因链））。

依赖放大：多组件的场景，组件之间存在依赖，涉及到多个组件知识。如果路径中的知识发送缺少，就无法独自确定根因源。

- 放大：对于一个依赖的组件，如何确定在定位某一个具体的问题过程中，所需要的具体知识范围呢？如果无法确定这个范围，就必然会出现进一步放大。

场景膨胀：链化根因导致场景很多，容易陷入其中，难于确定到底是哪个。

```
  根因源 ---> 根因1 ---> 根因2 ---> .... ---> 根因n --->  错误日志
```



2、无法依靠日志：程序的表现行为。



3、问题定位

分类：定性、定界、定根因、定量

定界：对于多个组件而整体行为出现问题，需要确定根本原因在哪个组件。而不必确定根因源。

定根因：确定根因源



### 2、代码阅读与问题定位

对于复杂的多组件分布式系统而言，而自己负责一个组件，定位一般化的问题，具体的现象到 根因之间可能存在很大的距离，做到先定界，再定位。而要先定界，则对于组件与组件之间的关联交互很关键（不仅仅要熟悉负责组件，更要清晰地知道外界关联点）

